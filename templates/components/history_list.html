<!-- Lista paginada de historial -->
{% for record in history %}
<div class="bg-gray-50 rounded-lg p-3 mb-2">
    <div class="flex items-center justify-between">
        <div>
            <p class="text-sm text-gray-600">{{ record.date_human }}</p>
            <p class="text-lg font-semibold">
                <span class="text-gray-500">{{ record.before }}</span>
                <span class="text-blue-600 mx-2">→</span>
                <span class="text-gray-900">{{ record.after }}</span>
            </p>
        </div>
        {% if record.after > record.before %}
        <span class="text-green-600 text-2xl">↑</span>
        {% elif record.after < record.before %}
        <span class="text-red-600 text-2xl">↓</span>
        {% endif %}
    </div>
</div>
{% endfor %}

<!-- Infinite scroll trigger -->
{% if has_more %}
<div hx-get="/inventory/api/item/{{ item_id }}/history?offset={{ offset }}"
     hx-trigger="intersect once"
     hx-swap="outerHTML">
    <!-- Skeleton -->
    <div class="bg-gray-200 rounded-lg p-3 mb-2 animate-pulse">
        <div class="h-4 bg-gray-300 rounded w-1/3 mb-2"></div>
        <div class="h-6 bg-gray-300 rounded w-2/3"></div>
    </div>
    <div class="bg-gray-200 rounded-lg p-3 mb-2 animate-pulse">
        <div class="h-4 bg-gray-300 rounded w-1/3 mb-2"></div>
        <div class="h-6 bg-gray-300 rounded w-2/3"></div>
    </div>
</div>
{% endif %}

{% if not history and not has_more %}
<div class="text-center p-8 text-gray-500">
    <p>No hay historial disponible</p>
</div>
{% endif %}
