<!-- Filtros de secciones con emojis -->
<div class="flex overflow-x-auto gap-2 pb-2">
    <!-- Todas las secciones -->
    <button
        onclick="filterBySection(null)"
        class="filter-btn flex-shrink-0 border-2 border-blue-600 bg-blue-600 text-white rounded-lg px-4 py-3 text-center hover:bg-blue-700 transition-all min-w-[100px]"
        data-section-id="all">
        <div class="text-2xl">ðŸ“‹</div>
        <div class="text-xs font-medium mt-1">Todos</div>
    </button>

    {% for section in sections %}
    <button
        onclick="filterBySection({{ section.id }})"
        class="filter-btn flex-shrink-0 border-2 border-gray-300 bg-white rounded-lg px-4 py-3 text-center hover:bg-blue-600 hover:text-white hover:border-blue-600 transition-all min-w-[100px]"
        data-section-id="{{ section.id }}">
        <div class="text-2xl">{{ section.emoji }}</div>
        <div class="text-xs font-medium mt-1">{{ section.name }}</div>
    </button>
    {% endfor %}
</div>

<script>
    function filterBySection(sectionId) {
        // Resetear estilos de botones
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.classList.remove('bg-blue-600', 'text-white', 'border-blue-600');
            btn.classList.add('bg-white', 'border-gray-300', 'text-gray-900');
        });

        // Marcar botÃ³n activo
        const activeBtn = sectionId
            ? document.querySelector(`[data-section-id="${sectionId}"]`)
            : document.querySelector('[data-section-id="all"]');

        activeBtn.classList.add('bg-blue-600', 'text-white', 'border-blue-600');
        activeBtn.classList.remove('bg-white', 'border-gray-300', 'text-gray-900');

        // Cargar items filtrados usando el endpoint de API (con lazy loading)
        const url = sectionId
            ? `/inventory/api/items?offset=0&section_id=${sectionId}`
            : '/inventory/api/items?offset=0';

        htmx.ajax('GET', url, {
            target: '#items-container',
            swap: 'innerHTML'
        });
    }
</script>
